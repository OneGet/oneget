
language: cpp

git:
  depth: 1000

os:
  - linux
  - osx
sudo: required
dist: trusty
osx_image: xcode8
env:
    - api=v2
    - api=v3

matrix:
  allow_failures:
    - os: osx


addons:
  artifacts:
    paths: $(ls ./src/out/OneGet.coreclr.zip | tr "\n" ":")

before_install:
  # Default 2.0.0 Ruby is buggy
  # Default bundler version is buggy
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then sudo apt-get install libunwind8; fi

install:
  - export PATH=~/.dotnet:$PATH
  - pushd tools
  - chmod +x download.sh
  - echo done giving access permission to download shell file
  - chmod +x travis.sh
  - echo done giving access permission to travis shell file
  - ./download.sh
  - echo done running download shell file
  - popd


script: 
  - ./tools/travis.sh $api










