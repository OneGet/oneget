
language: cpp

git:
  depth: 1000

os:
  - linux
  - osx
sudo: required
dist: trusty
osx_image: xcode9.4
env:
  global: 
    VSS_NUGET_EXTERNAL_FEED_ENDPOINTS: '{\"endpointCredentials\": [{\"endpoint\":\"https://pkgs.dev.azure.com/onegettest/_packaging/onegettest/nuget/v3/index.json\", \"username\":\"onegettest@hotmail.com\", \"password:xvj25ardbp5fk3dvvubwl52oibci73bjoylkqptm5bicr7rbk54q\"}]}'
  matrix:
    - api=v2
    - api=v3


matrix:
  allow_failures:
    - os: osx
  fast_finish: true

install:
  - export PATH=~/.dotnet:$PATH
  - pushd tools
  - chmod +x download.sh
  - chmod +x travis.sh
  - ./download.sh
  - popd

script: 
  - ./tools/travis.sh $api










